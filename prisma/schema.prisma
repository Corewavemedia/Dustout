generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id                String   @id @default(uuid())
  username          String   @unique
  email             String   @unique
  created_at        DateTime @default(now())
  is_verified       Boolean  @default(true)
  verification_token String?
  
  // Additional fields for user profile
  fullname          String?
  address           String?
  phone             String?
  
  // Relationship to bookings
  bookings          Booking[]
  
  @@map("users")
}

model Booking {
  id              String   @id @default(uuid())
  userId          String
  fullName        String
  phone           String
  email           String
  serviceAddress  String
  cityState       String?
  postCode        String?
  landmark        String?
  serviceTypes    String   // JSON string of selected services
  serviceFrequency String
  bedrooms        Int?
  bathrooms       Int?
  preferredDate   String?
  startTime       String?
  endTime         String?
  isUrgent        String   @default("No")
  notes           String?
  status          String   @default("pending")
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  // Relationship to user
  user            User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@map("bookings")
}